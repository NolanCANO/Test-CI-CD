apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  # ========================================
  # üìù VARIABLE √Ä MODIFIER PAR PROJET
  # ========================================
  name: springboot-ci-run  # Nom unique du pipeline run (ex: mon-app-ci-run)
spec:
  pipelineRef:
    name: springboot-ci  # Ne pas modifier (r√©f√©rence au pipeline)
  params:
    # ========================================
    # üîß VARIABLES √Ä CONFIGURER PAR PROJET
    # ========================================
    - name: GIT_URL
      value: https://github.com/NolanCANO/Test-CI-CD.git  # ‚ö†Ô∏è MODIFIER : URL de votre repository Git
    - name: GIT_REVISION
      value: main  # ‚ö†Ô∏è MODIFIER si n√©cessaire : Branche √† utiliser (main, develop, etc.)
    - name: PROJECT_DIR
      value: demo  # ‚ö†Ô∏è MODIFIER : Chemin relatif vers le dossier contenant pom.xml (ex: "." si √† la racine, "backend" si dans un sous-dossier)
    # - name: MAVEN_ARGS
    #   value: "-DskipTests=false"  # Optionnel : Arguments Maven suppl√©mentaires
  workspaces:
    # ========================================
    # üíæ CONFIGURATION DU STOCKAGE
    # ========================================
    - name: source
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi  # ‚ö†Ô∏è MODIFIER si n√©cessaire : Taille du volume (augmenter pour gros projets)
    - name: maven-repo
      emptyDir: {}  # Cache Maven temporaire (ne pas modifier)
